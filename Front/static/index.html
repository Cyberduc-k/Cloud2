<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/pure-min.css" integrity="sha384-X38yfunGUhNzHpBaEBsWLO+A0HDYOQi8ufWDkZ0k9e0eXz/tH3II7uKZ9msv++Ls" crossorigin="anonymous">
    <link rel="stylesheet" href="/ui/login.css">
    <link rel="icon" href="/ui/assets/sudoku.svg" sizes="any" type="image/svg">
</head>
<body>
    <main>
        <section class="login-window">
            <h1>Cloud 2 Sudoku application Login</h1>
            <img class="sudoku-image" src="/ui/assets/sudoku_wallpaper.png"/>
                <form class="pure-form pure-form-stacked" name="login_form" onsubmit="login(event)">
                    <fieldset>
                        <section class="pure-control-group">
                            <label for="stacked-username" class="labelText">Username</label>
                            <input type="text" id="stacked-username" placeholder="John" required/>
                        </section>
                        <section class="pure-control-group">
                            <label for="stacked-password" class="labelText">Password</label>
                            <input type="password" id="stacked-password" placeholder="1234" required/>
                        </section>
                        <section class="pure-controls">
                            <button type="submit" class="pure-button pure-button-primary">Login</button>
                        </section>
                    </fieldset>
                </form>
        </section>
    </main>
    <footer class="footer-class">
        <label class="footer-team-label">Created By Team 3 (Elias, Fabio, Sander & Tymo) &copy; 2023 Inholland Hogeschool</label>
    </footer>
    <script>
        function login(event){
            event.preventDefault();
            var username = document.getElementById("stacked-username").value;
            var password = document.getElementById("stacked-password").value;

            let data = {Username: username, Password: password};

            fetch(`/login`, {
                method: "POST",
                headers: {'Content-Type': 'application/json'}, 
                body: JSON.stringify(data)
            }).then(res => {
                //set the response user from the login go service in session storage
                sessionStorage.setItem("User", res);

                console.log("Request complete! response:", res);

                //check if the user was retrieved and set
                var user = sessionStorage.getItem("User");
            
                if(user != null || user != {}) {
                    window.location.replace("http://localhost:8081/puzzles.html");
                }
            });
        }
    </script>
</body>
</html>
